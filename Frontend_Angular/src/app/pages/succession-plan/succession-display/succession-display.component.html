<div class="mat-elevation-z8">
  <!-- Filter Input -->
  <mat-form-field appearance="outline" class="filter-input">
    <mat-label>Filter</mat-label>
    <input matInput (keyup)="applyFilter($event)" placeholder="Ex. Department, Role Holder">
  </mat-form-field>
  

  <!-- Table -->
  <table mat-table [dataSource]="dataSource" matSort class="custom-table">

    <!-- Department Column -->
    <ng-container matColumnDef="departmentName">
      <th mat-header-cell *matHeaderCellDef mat-sort-header> Department </th>
      <td mat-cell *matCellDef="let plan">
        {{ plan.departmentName }}
      </td>
    </ng-container>

    <!-- Succession Driver Column -->
    <ng-container matColumnDef="driverName">
      <th mat-header-cell *matHeaderCellDef mat-sort-header> Succession Driver </th>
      <td mat-cell *matCellDef="let plan">
        {{ plan.driverName }}
      </td>
    </ng-container>

    <!-- Key Role Column -->
    <ng-container matColumnDef="positionName">
      <th mat-header-cell *matHeaderCellDef mat-sort-header> Key Role </th>
      <td mat-cell *matCellDef="let plan">
        {{ plan.positionName }}
      </td>
    </ng-container>

    <!-- Current Role Holder Column -->
    <ng-container matColumnDef="currentRoleHolderName">
      <th mat-header-cell *matHeaderCellDef mat-sort-header> Current Role Holder </th>
      <td mat-cell *matCellDef="let plan">
        {{ plan.currentRoleHolderName }}
      </td>
    </ng-container>

    <!-- Retention Risk Rating Column -->
    <ng-container matColumnDef="riskRating">
      <th mat-header-cell *matHeaderCellDef mat-sort-header> Retention Risk Rating </th>
      <td mat-cell *matCellDef="let plan" [ngClass]="getRiskRatingClass(plan.riskRating)">
        {{ plan.riskRating }}
      </td>
    </ng-container>

    <!-- Actions Column -->
    <ng-container matColumnDef="actions">
      <th mat-header-cell *matHeaderCellDef> Actions </th>
      <td mat-cell *matCellDef="let plan">
        <button mat-button class="action-button" (click)="viewRow(plan)">View</button>
        <button mat-button class="action-button" (click)="editRow(plan)">Edit</button>
      </td>
    </ng-container>

    <!-- Header and Row Definitions -->
    <tr mat-header-row *matHeaderRowDef="['departmentName', 'driverName', 'positionName', 'currentRoleHolderName', 'riskRating', 'actions']"></tr>
    <tr mat-row *matRowDef="let row; columns: ['departmentName', 'driverName', 'positionName', 'currentRoleHolderName', 'riskRating', 'actions'];"></tr>
  </table>

  <!-- Paginator -->
  <mat-paginator [pageSizeOptions]="[5, 10, 20]" showFirstLastButtons></mat-paginator>

  <!-- Key Section -->
  <div class="key-section">
    <h4>Key Table</h4>
    <table class="key-table">
      <thead>
        <tr>
          <th>Key</th>
          <th>Succession RAG Status</th>
          <th>Talent Ratings</th>
          <th>Current State Assessment - August 2023</th>
          <th>Target State - August 2024</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td class="red">Red - No RN; No R1-2</td>
          <td>H1</td>
          <td>Ready Now (RN)</td>
          <td>20%</td>
          <td>Ready Now</td>
          <td>80%</td>
        </tr>
        <tr>
          <td class="amber">Amber - No RN, R1-2 Known</td>
          <td>H2</td>
          <td>Ready in 1 - 2 Years</td>
          <td>80%</td>
          <td>Ready in 1 - 2 Years</td>
          <td>100%</td>
        </tr>
        <tr>
          <td class="green">Green - RN Known</td>
          <td>H3</td>
          <td>Ready in More than 2 Years</td>
          <td>50%</td>
          <td>Ready in More than 2 Years</td>
          <td>100%</td>
        </tr>
      </tbody>
    </table>
  </div>
</div>
